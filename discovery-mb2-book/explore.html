<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>What&#x27;s left for you to explore - Discovery</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Discover the world of microcontrollers through Rust with the BB2 micro:bit v2">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded "><a href="01-background/index.html"><strong aria-hidden="true">1.</strong> Background</a></li><li class="chapter-item expanded "><a href="02-requirements/index.html"><strong aria-hidden="true">2.</strong> Hardware/knowledge requirements</a></li><li class="chapter-item expanded "><a href="03-setup/index.html"><strong aria-hidden="true">3.</strong> Setting up a development environment</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="03-setup/linux.html"><strong aria-hidden="true">3.1.</strong> Linux</a></li><li class="chapter-item expanded "><a href="03-setup/windows.html"><strong aria-hidden="true">3.2.</strong> Windows</a></li><li class="chapter-item expanded "><a href="03-setup/macos.html"><strong aria-hidden="true">3.3.</strong> macOS</a></li><li class="chapter-item expanded "><a href="03-setup/verify.html"><strong aria-hidden="true">3.4.</strong> Verify the installation</a></li><li class="chapter-item expanded "><a href="03-setup/IDE.html"><strong aria-hidden="true">3.5.</strong> Setting up your IDE</a></li></ol></li><li class="chapter-item expanded "><a href="04-meet-your-hardware/index.html"><strong aria-hidden="true">4.</strong> Meet your hardware</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="04-meet-your-hardware/microbit-v2.html"><strong aria-hidden="true">4.1.</strong> micro:bit v2</a></li><li class="chapter-item expanded "><a href="04-meet-your-hardware/terminology.html"><strong aria-hidden="true">4.2.</strong> Rust Embedded terminology</a></li></ol></li><li class="chapter-item expanded "><a href="05-meet-your-software/index.html"><strong aria-hidden="true">5.</strong> Meet your software</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="05-meet-your-software/build-it.html"><strong aria-hidden="true">5.1.</strong> Build it</a></li><li class="chapter-item expanded "><a href="05-meet-your-software/flash-it.html"><strong aria-hidden="true">5.2.</strong> Flash it</a></li><li class="chapter-item expanded "><a href="05-meet-your-software/debug-it.html"><strong aria-hidden="true">5.3.</strong> Debug it</a></li><li class="chapter-item expanded "><a href="05-meet-your-software/light-it-up.html"><strong aria-hidden="true">5.4.</strong> Light it up</a></li></ol></li><li class="chapter-item expanded "><a href="06-hello-world/index.html"><strong aria-hidden="true">6.</strong> Hello World</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="06-hello-world/toggle-it.html"><strong aria-hidden="true">6.1.</strong> Toggle it</a></li><li class="chapter-item expanded "><a href="06-hello-world/spin-wait.html"><strong aria-hidden="true">6.2.</strong> Spin wait</a></li><li class="chapter-item expanded "><a href="06-hello-world/nop.html"><strong aria-hidden="true">6.3.</strong> NOP</a></li><li class="chapter-item expanded "><a href="06-hello-world/timers.html"><strong aria-hidden="true">6.4.</strong> Timers</a></li><li class="chapter-item expanded "><a href="06-hello-world/portability.html"><strong aria-hidden="true">6.5.</strong> Portability</a></li><li class="chapter-item expanded "><a href="06-hello-world/board-support-crate.html"><strong aria-hidden="true">6.6.</strong> Board support crate</a></li></ol></li><li class="chapter-item expanded "><a href="07-registers/index.html"><strong aria-hidden="true">7.</strong> Registers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="07-registers/rtrm.html"><strong aria-hidden="true">7.1.</strong> RTRM</a></li><li class="chapter-item expanded "><a href="07-registers/misoptimization.html"><strong aria-hidden="true">7.2.</strong> (mis)Optimization</a></li><li class="chapter-item expanded "><a href="07-registers/bad-address.html"><strong aria-hidden="true">7.3.</strong> 0xBAAAAAAD address</a></li><li class="chapter-item expanded "><a href="07-registers/spooky-action-at-a-distance.html"><strong aria-hidden="true">7.4.</strong> Spooky action at a distance</a></li><li class="chapter-item expanded "><a href="07-registers/type-safe-manipulation.html"><strong aria-hidden="true">7.5.</strong> Type safe manipulation</a></li></ol></li><li class="chapter-item expanded "><a href="08-led-roulette/index.html"><strong aria-hidden="true">8.</strong> LED roulette</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="08-led-roulette/the-challenge.html"><strong aria-hidden="true">8.1.</strong> The challenge</a></li><li class="chapter-item expanded "><a href="08-led-roulette/my-solution.html"><strong aria-hidden="true">8.2.</strong> My solution</a></li></ol></li><li class="chapter-item expanded "><a href="09-serial-communication/index.html"><strong aria-hidden="true">9.</strong> Serial communication</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="09-serial-communication/nix-tooling.html"><strong aria-hidden="true">9.1.</strong> *nix tooling</a></li><li class="chapter-item expanded "><a href="09-serial-communication/windows-tooling.html"><strong aria-hidden="true">9.2.</strong> Windows tooling</a></li></ol></li><li class="chapter-item expanded "><a href="10-uart/index.html"><strong aria-hidden="true">10.</strong> UART</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="10-uart/send-a-single-byte.html"><strong aria-hidden="true">10.1.</strong> Send a single byte</a></li><li class="chapter-item expanded "><a href="10-uart/send-a-string.html"><strong aria-hidden="true">10.2.</strong> Send a string</a></li><li class="chapter-item expanded "><a href="10-uart/naive-approach-write.html"><strong aria-hidden="true">10.3.</strong> Naive approach and write!</a></li><li class="chapter-item expanded "><a href="10-uart/receive-a-single-byte.html"><strong aria-hidden="true">10.4.</strong> Receive a single byte</a></li><li class="chapter-item expanded "><a href="10-uart/echo-server.html"><strong aria-hidden="true">10.5.</strong> Echo server</a></li><li class="chapter-item expanded "><a href="10-uart/reverse-a-string.html"><strong aria-hidden="true">10.6.</strong> Reverse a string</a></li><li class="chapter-item expanded "><a href="10-uart/my-solution.html"><strong aria-hidden="true">10.7.</strong> My solution</a></li></ol></li><li class="chapter-item expanded "><a href="11-i2c/index.html"><strong aria-hidden="true">11.</strong> I2C</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="11-i2c/the-general-protocol.html"><strong aria-hidden="true">11.1.</strong> The general protocol</a></li><li class="chapter-item expanded "><a href="11-i2c/lsm303agr.html"><strong aria-hidden="true">11.2.</strong> LSM303AGR</a></li><li class="chapter-item expanded "><a href="11-i2c/read-a-single-register.html"><strong aria-hidden="true">11.3.</strong> Read a single register</a></li><li class="chapter-item expanded "><a href="11-i2c/using-a-driver.html"><strong aria-hidden="true">11.4.</strong> Using a driver</a></li><li class="chapter-item expanded "><a href="11-i2c/the-challenge.html"><strong aria-hidden="true">11.5.</strong> The challenge</a></li><li class="chapter-item expanded "><a href="11-i2c/my-solution.html"><strong aria-hidden="true">11.6.</strong> My solution</a></li></ol></li><li class="chapter-item expanded "><a href="12-led-compass/index.html"><strong aria-hidden="true">12.</strong> LED compass</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="12-led-compass/magnitude.html"><strong aria-hidden="true">12.1.</strong> Magnitude</a></li><li class="chapter-item expanded "><a href="12-led-compass/the-challenge.html"><strong aria-hidden="true">12.2.</strong> The challenge</a></li><li class="chapter-item expanded "><a href="12-led-compass/my-solution.html"><strong aria-hidden="true">12.3.</strong> My solution</a></li></ol></li><li class="chapter-item expanded "><a href="13-punch-o-meter/index.html"><strong aria-hidden="true">13.</strong> Punch-o-meter</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="13-punch-o-meter/gravity-is-up.html"><strong aria-hidden="true">13.1.</strong> Gravity is up?</a></li><li class="chapter-item expanded "><a href="13-punch-o-meter/the-challenge.html"><strong aria-hidden="true">13.2.</strong> The challenge</a></li><li class="chapter-item expanded "><a href="13-punch-o-meter/my-solution.html"><strong aria-hidden="true">13.3.</strong> My solution</a></li></ol></li><li class="chapter-item expanded "><a href="14-snake-game/index.html"><strong aria-hidden="true">14.</strong> Snake game</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="14-snake-game/game-logic.html"><strong aria-hidden="true">14.1.</strong> Game logic</a></li><li class="chapter-item expanded "><a href="14-snake-game/controls.html"><strong aria-hidden="true">14.2.</strong> Controls</a></li><li class="chapter-item expanded "><a href="14-snake-game/nonblocking-display.html"><strong aria-hidden="true">14.3.</strong> Non-blocking display</a></li><li class="chapter-item expanded "><a href="14-snake-game/final-assembly.html"><strong aria-hidden="true">14.4.</strong> Final assembly</a></li></ol></li><li class="chapter-item expanded "><a href="explore.html" class="active"><strong aria-hidden="true">15.</strong> What's left for you to explore</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="appendix/1-general-troubleshooting/index.html">General troubleshooting</a></li><li class="chapter-item expanded affix "><a href="appendix/2-how-to-use-gdb/index.html">How to use GDB</a></li><li class="chapter-item expanded affix "><a href="appendix/3-mag-calibration/index.html">Magnetometer Calibration</a></li><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Discovery</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-embedded/discovery-mb2/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="whats-left-for-you-to-explore"><a class="header" href="#whats-left-for-you-to-explore">What's left for you to explore</a></h1>
<p>We have barely scratched the surface! There's lots of stuff left for you to
explore.</p>
<blockquote>
<p><strong>NOTE:</strong> If you're reading this, and you'd like to help add examples or
exercises to the Discovery book for any of the items below, or any other
relevant embedded topics, we'd love to have your help!</p>
<p>Please <a href="https://github.com/rust-embedded/discovery-mb2/issues/new">open an issue</a> if you would like to help, but need assistance or
mentoring for how to contribute this to the book, or open a Pull Request
adding the information!</p>
</blockquote>
<h2 id="topics-about-embedded-software"><a class="header" href="#topics-about-embedded-software">Topics about embedded software</a></h2>
<p>These topics discuss strategies for writing embedded software. Although many
problems can be solved in different ways, these sections talk about some
strategies, and when they make sense (or don't make sense) to use.</p>
<h3 id="multitasking"><a class="header" href="#multitasking">Multitasking</a></h3>
<p>Most of our programs executed a single task. How could we achieve multitasking in a system with no
OS, and thus no threads? There are two main approaches to multitasking: preemptive multitasking and
cooperative multitasking.</p>
<p>In preemptive multitasking a task that's currently being executed can, at any point in time, be
<em>preempted</em> (interrupted) by another task. On preemption, the first task will be suspended and the
processor will instead execute the second task. At some point the first task will be resumed.
Microcontrollers provide hardware support for preemption in the form of <em>interrupts</em>. We were
introduced to interrupts when we built our snake game in chapter 11.</p>
<p>In cooperative multitasking a task that's being executed will run until it reaches a <em>suspension
point</em>. When the processor reaches that suspension point it will stop executing the current task and
instead go and execute a different task. At some point the first task will be resumed. The main
difference between these two approaches to multitasking is that in cooperative multitasking <em>yields</em>
execution control at <em>known</em> suspension points instead of being forcefully preempted at any point of
its execution.</p>
<h3 id="sleeping"><a class="header" href="#sleeping">Sleeping</a></h3>
<p>All our programs have been continuously polling peripherals to see if there's anything that needs to
be done. However, sometimes there's nothing to be done!  At those times, the microcontroller should
&quot;sleep&quot;.</p>
<p>When the processor sleeps, it stops executing instructions and this saves power.  It's almost always
a good idea to save power so your microcontroller should be sleeping as much as possible. But, how
does it know when it has to wake up to perform some action? Interrupts are one of the events that
wake up the microcontroller but there are others. The ARM machine instructions <code>wfi</code> and <code>wfe</code> are
the instructions that make the processor &quot;sleep&quot; waiting for an interrupt or event.</p>
<h2 id="topics-related-to-microcontroller-capabilities"><a class="header" href="#topics-related-to-microcontroller-capabilities">Topics related to microcontroller capabilities</a></h2>
<p>Microcontrollers (like our nRF52/nRF51) have many capabilities. However, many share similar
capabilities that can be used to solve all sorts of different problems.</p>
<p>These topics discuss some of those capabilities, and how they can be used effectively
in embedded development.</p>
<h3 id="direct-memory-access-dma"><a class="header" href="#direct-memory-access-dma">Direct Memory Access (DMA).</a></h3>
<p>Some peripherals have DMA, a kind of <em>asynchronous</em> <code>memcpy</code> that allows the peripheral to move data
into or out of memory without the CPU being involved.</p>
<p>If you are working with a micro:bit v2 you have actually already used DMA: the HAL does this for you
with the UARTE and TWIM peripherals. A DMA peripheral can be used to perform bulk transfers of data:
either from RAM to RAM, from a peripheral like a UARTE, to RAM, or from RAM to a peripheral. You can
schedule a DMA transfer — for example &quot;read 256 bytes from UARTE into this buffer&quot; — and leave it
running in the background. You can check some register later to see if the transfer has completed,
or you can ask to receive an interrupt when the transfer completes. Thus, you can schedule the DMA
transfer and do other work while the transfer is ongoing.</p>
<p>The details of low-level DMA can be a bit tricky. We hope to add a chapter covering this topic in
the near future.</p>
<h3 id="interrupts"><a class="header" href="#interrupts">Interrupts</a></h3>
<p>We saw button interrupts briefly in [chapter 11].</p>
<p><a href="14-snake-game/controls.html">chapter 11</a></p>
<p>This introduced the key idea: in order to interact with the real world, it is often necessary for
the microcontroller to respond <em>immediately</em> when some kind of event occurs.</p>
<p>Microcontrollers have the ability to be interrupted, meaning when a certain event
occurs, it will stop whatever it is doing at the moment, to instead respond to that
event. This can be very useful when we want to stop a motor when a button is pressed,
or measure a sensor when a timer finishes counting down.</p>
<p>Although these interrupts can be very useful, they can also be a bit difficult
to work with properly. We want to make sure that we respond to events quickly,
but also allow other work to continue as well.</p>
<p>In Rust, we model interrupts similar to the concept of threading on desktop Rust
programs. This means we also must think about the Rust concepts of <code>Send</code> and <code>Sync</code>
when sharing data between our main application, and code that executes as part of
handling an interrupt event.</p>
<h3 id="pulse-width-modulation-pwm"><a class="header" href="#pulse-width-modulation-pwm">Pulse Width Modulation (PWM)</a></h3>
<p>In a nutshell, PWM is turning on something and then turning it off periodically
while keeping some proportion (&quot;duty cycle&quot;) between the &quot;on time&quot; and the &quot;off
time&quot;. When used on a LED with a sufficiently high frequency, this can be used
to dim the LED. A low duty cycle, say 10% on time and 90% off time, will make
the LED very dim wheres a high duty cycle, say 90% on time and 10% off time,
will make the LED much brighter (almost as if it were fully powered).</p>
<p>In general, PWM can be used to control how much <em>power</em> is given to some
electric device. With proper (power) electronics between a microcontroller and
an electrical motor, PWM can be used to control how much power is given to the
motor thus it can be used to control its torque and speed. Then you can add an
angular position sensor and you got yourself a closed loop controller that can
control the position of the motor at different loads.</p>
<p>There are some abstraction for working with PWM in the <code>embedded-hal</code> <a href="https://docs.rs/embedded-hal/latest/embedded_hal/pwm/index.html"><code>pwm</code> module</a> and you will
find implementations of these traits in <code>nrf52833-hal</code>.</p>
<h3 id="digital-inputs-and-outputs"><a class="header" href="#digital-inputs-and-outputs">Digital inputs and outputs</a></h3>
<p>We have used the microcontroller pins as digital outputs, to drive LEDs. When building our snake
game, we also caught a glimpse of how these pins can be configured as digital inputs. As digital
inputs, these pins can read the binary state of switches (on/off) or buttons (pressed/not pressed).</p>
<p>Digital inputs and outputs are abstracted within the <code>embedded-hal</code> <a href="https://docs.rs/embedded-hal/latest/embedded_hal/digital/index.html"><code>digital</code> module</a> and
[<code>nrf52833-hal</code>] does have an implementation for them.</p>
<p>(<em>spoilers</em> reading the binary state of switches / buttons is not as straightforward as it sounds
;-) )</p>
<h3 id="analog-to-digital-converters-adc"><a class="header" href="#analog-to-digital-converters-adc">Analog-to-Digital Converters (ADC)</a></h3>
<p>There are a lot of digital sensors out there. You can use a protocol like I2C and SPI to read
them. But analog sensors also exist! These sensors just output a reading to the CPU of the voltage
they are sensing at an ADC input pin.</p>
<p>The ADC peripheral can thus be used to measure an &quot;analog&quot; voltage level — for example, <code>1.25</code> Volts
— as a &quot;digital&quot; number — for example, <code>24824</code> — that the processor can use in its calculations.</p>
<p>There were generic ADC traits in <code>embedded-hal</code>, but they were removed for <code>embedded-hal</code> 1.0: see
<a href="https://github.com/rust-embedded/embedded-hal/issues/377">issue #377</a>. The <code>nrf52833-hal</code> crate provides a nice interface to the specific ADC built into the
nRF52833.</p>
<h3 id="digital-to-analog-converters-dac"><a class="header" href="#digital-to-analog-converters-dac">Digital-to-Analog Converters (DAC)</a></h3>
<p>As you might expect a DAC is exactly the opposite of ADC. You can write some digital number into a
register to produce a specific voltage on some analog output pin. When this analog output pin is
connected to some appropriate electronics and the register is written to quickly with the right
values you can do things like produce sounds or music.</p>
<p>Neither the nRF52833 nor the MB2 board has a dedicated DAC. One typically gets a kind of DAC effect
by outputting PWM and using a bit of electronics on the output (RC filter) to &quot;smooth&quot; out the PWM
waveform.</p>
<h3 id="real-time-clock"><a class="header" href="#real-time-clock">Real Time Clock</a></h3>
<p>A Real-Time Clock peripheral keeps track of time under its own power, usually in &quot;human format&quot;:
seconds, minutes, hours, days, months and years.  Some Real-Time Clocks even handle leap years and
Daylight Saving Time automatically.</p>
<p>Neither the nRF52833 nor the MB2 board contains a Real-Time Clock. The nRF52833 does contain
&quot;Real-Time Counter&quot; (RTC), a low-frequency ticking clock that is supported by <code>nrf52833-hal</code>.  This
counter can be dedicated to serve as a synthesized real-time clock. The key requirement, of course,
is to keep the RTC peripheral powered even when the MB2 is not in use. While the MB2 does not have
an on-board battery, the RTC should be able to run for a long time (possibly years) with a battery
plugged into the battery port on the MB2 (for example, the battery pack provided with the micro::bit
Go kit).</p>
<h3 id="other-communication-protocols"><a class="header" href="#other-communication-protocols">Other communication protocols</a></h3>
<ul>
<li>I2C: discussed in earlier chapters of this book</li>
<li>SPI: abstracted within the <a href="https://docs.rs/embedded-hal/0.2.6/embedded_hal/spi/index.html"><code>embedded-hal</code> <code>spi</code> module</a> and implemented by the [<code>nrf52-hal</code>]</li>
<li>I2S: currently not abstracted within the <code>embedded-hal</code> but implemented by the [<code>nrf52-hal</code>]</li>
<li>Ethernet: there does exist a small TCP/IP stack named <a href="https://github.com/smoltcp-rs/smoltcp"><code>smoltcp</code></a> which is implemented for some
chips. The MB2 does not have an Ethernet peripheral</li>
<li>USB: there is some experimental work on this, for example with the <a href="https://github.com/mvirkkunen/usb-device"><code>usb-device</code></a> crate</li>
<li>Bluetooth: the <code>nrf-softdevice</code> wrapper provided by the <code>Embassy</code> MB2 runtime is probably the
easiest entry into MB2 Bluetooth right now</li>
<li>CAN, SMBUS, IrDA, etc: All kinds of specialty interfaces exist in the world; Rust sometimes has
support for them. Please investigate the current situation for the interface you need</li>
</ul>
<p>Different applications use different communication protocols. User facing applications usually have
a USB connector because USB is a ubiquitous protocol in PCs and smartphones. Whereas inside cars
you'll find plenty of CAN buses. Some digital sensors use SPI, I2C or SMBUS.</p>
<p>If you happen to be interested in developing abstractions in the <code>embedded-hal</code> or implementations
of peripherals in general, don't be shy to open an issue in the HAL repositories. Alternatively you
could also join the <a href="https://matrix.to/#/#rust-embedded:matrix.org">Rust Embedded matrix channel</a> and get into contact with most of the people who
built the stuff from above.</p>
<h2 id="general-embedded-relevant-topics"><a class="header" href="#general-embedded-relevant-topics">General Embedded-Relevant Topics</a></h2>
<p>These topics cover items that are not specific to our device, or the hardware on it. Instead, they
discuss useful techniques that could be used on embedded systems. Most of what we will discuss here
is not available on the MB2 — but most of it could easily be added by connecting a cheap piece of
hardware to the MB2 edge-card connector, either driving it directly or using something like SPI or
I2C to control it.</p>
<h3 id="gyroscopes"><a class="header" href="#gyroscopes">Gyroscopes</a></h3>
<p>As part of our Punch-o-meter exercise, we used the Accelerometer to measure changes in acceleration
in three dimensions. But there are other motion sensors such as gyroscopes, which allows us to
measure changes in &quot;spin&quot; in three dimensions.</p>
<p>This can be very useful when trying to build certain systems, such as a robot that wants to avoid
tipping over. Additionally, the data from a sensor like a gyroscope can also be combined with data
from accelerometer using a technique called Sensor Fusion (see below for more information).</p>
<h3 id="servo-and-stepper-motors"><a class="header" href="#servo-and-stepper-motors">Servo and Stepper Motors</a></h3>
<p>While some motors are used primarily just to spin in one direction or the other, for example driving
a remote control car forwards or backwards, it is sometimes useful to measure more precisely how a
motor rotates.</p>
<p>A microcontroller can be used to drive Servo or Stepper motors, which allow for more precise control
of how many turns are being made by the motor, or can even position the motor in one specific place,
for example if we wanted to move the arms of a clock to a particular direction.</p>
<h3 id="sensor-fusion"><a class="header" href="#sensor-fusion">Sensor fusion</a></h3>
<p>The micro:bit contains two motion sensors: an accelerometer and a magnetometer.  On their own these
measure (proper) acceleration and (the Earth's) magnetic field.  But these magnitudes can be &quot;fused&quot;
into something more useful: a &quot;robust&quot; measurement of the orientation of the board, with less
measurement error than that of any single sensor.</p>
<p>This idea of deriving more reliable data from different sources is known as sensor fusion.</p>
<hr />
<p>So where to next? </p>
<p>First and foremost, join us on the <a href="https://matrix.to/#/#rust-embedded:matrix.org">Rust Embedded matrix channel</a>. Lots of people who contribute or
work on embedded software hang out there, including, for example, the people who wrote the
<code>microbit</code> BSP, the <code>nrf52-hal</code> crate, the <code>embedded-hal</code> crates, etc. We are happy to help you get
started or move on with embedded programming in Rust!</p>
<p>There are many other options:</p>
<ul>
<li>You could check out the examples in the <a href="https://github.com/nrf-rs/microbit/"><code>microbit-v2</code></a> board support crate. All those examples
work for the micro:bit board you have.</li>
</ul>
<ul>
<li>If you are looking for a general overview of what is available in Rust Embedded right now check
out the <a href="https://github.com/rust-embedded/awesome-embedded-rust/">Awesome Rust Embedded</a> list.</li>
</ul>
<ul>
<li>You could check out <a href="https://embassy.dev">Embassy</a>. This is a modern efficient preemptive multitasking framework that
supports concurrent execution using Rust <code>async/await</code>.</li>
</ul>
<ul>
<li>You could check out Real-Time Interrupt-driven Concurrency <a href="https://rtic.rs">RTIC</a>. RTIC is a very efficient
preemptive multitasking framework that supports task prioritization and deadlock-free execution.</li>
</ul>
<ul>
<li>You could check out more abstractions of the <a href="https://github.com/rust-embedded/embedded-hal"><code>embedded-hal</code></a> project and maybe even try and write
your own platform agnostic driver based on it.</li>
</ul>
<ul>
<li>You could try running Rust on a different development board. The easiest way to get started is to
use the <a href="https://docs.rs/cortex-m-quickstart/0.3.1/cortex_m_quickstart/"><code>cortex-m-quickstart</code></a> Cargo project template.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="14-snake-game/final-assembly.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="appendix/1-general-troubleshooting/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="14-snake-game/final-assembly.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="appendix/1-general-troubleshooting/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
